<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DYQTNBBQ22"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-DYQTNBBQ22');
    </script>

    <!-- Primary Meta Tags -->
    <title>Sleep Timer - Free Online Nap Timer & Power Nap Countdown</title>
    <meta name="title" content="Sleep Timer - Free Online Nap Timer & Power Nap Countdown">
    <meta name="description"
        content="Free sleep timer for power naps and rest! Presets for 20 min power naps, 90 min full cycles & more. Gentle alarm sounds. Perfect for napping at work or home.">
    <meta name="keywords"
        content="sleep timer, nap timer, power nap timer, 20 minute nap, 90 minute sleep, rest timer, siesta timer, nap alarm">
    <meta name="robots" content="index, follow">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://lazytimer.com/sleep-timer">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://lazytimer.com/sleep-timer">
    <meta property="og:title" content="Sleep Timer - Free Online Nap Timer">
    <meta property="og:description"
        content="Free sleep timer for power naps! 20 min, 30 min, 90 min presets with gentle alarms.">
    <meta property="og:image" content="https://lazytimer.com/stopwatch.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Sleep Timer - Free Online Nap Timer">
    <meta name="twitter:description" content="Free sleep timer for power naps with gentle alarm sounds!">
    <meta name="twitter:image" content="https://lazytimer.com/stopwatch.png">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">

    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5523870768931777"
        crossorigin="anonymous"></script>

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "LazyTimer Sleep Timer",
      "url": "https://lazytimer.com/sleep-timer",
      "description": "Free online sleep and nap timer with gentle alarm sounds. Perfect for power naps, rest breaks, and full sleep cycles.",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": [
        "Power nap presets",
        "90 minute sleep cycle",
        "Gentle alarm sounds",
        "Visual countdown",
        "Works on all devices"
      ],
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.9",
        "ratingCount": "1893"
      }
    }
    </script>

    <!-- FAQ Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "How long should a power nap be?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The ideal power nap is 20-30 minutes. This length allows you to enter light sleep stages for restoration without falling into deep sleep, which can cause grogginess. Our sleep timer has 20 and 30 minute presets for perfect power naps."
          }
        },
        {
          "@type": "Question",
          "name": "What is a 90 minute sleep cycle?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "A complete sleep cycle lasts approximately 90 minutes and includes all sleep stages from light to deep to REM. Waking at the end of a 90 minute cycle helps you feel refreshed rather than groggy. Set our timer for 90 minutes for a full restorative nap."
          }
        },
        {
          "@type": "Question",
          "name": "Is a 20 minute nap enough?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes! A 20 minute power nap is scientifically proven to boost alertness, mood, and performance. It's long enough to provide restoration but short enough to avoid sleep inertia (that groggy feeling from deep sleep)."
          }
        },
        {
          "@type": "Question",
          "name": "When is the best time to take a nap?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The best time for a nap is early-to-mid afternoon, typically between 1-3 PM. This aligns with your body's natural circadian rhythm dip and won't interfere with nighttime sleep. Avoid napping after 4 PM."
          }
        },
        {
          "@type": "Question",
          "name": "Does this sleep timer have a gentle alarm?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes! Our sleep timer includes multiple alarm options. You can preview each sound and choose one that will wake you gently without startling. The alarm plays automatically when your nap time is complete."
          }
        }
      ]
    }
    </script>

    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://lazytimer.com/"
      },{
        "@type": "ListItem",
        "position": 2,
        "name": "Sleep Timer",
        "item": "https://lazytimer.com/sleep-timer"
      }]
    }
    </script>

    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="LazyTimer">
    <link rel="apple-touch-icon" href="/stopwatch.png">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Screen Reader Only - visually hidden but accessible */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #2d1b4e 50%, #1e1e3f 100%);
            min-height: 100vh;
            padding: 20px;
            color: #e8e8e8;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        header h1 {
            font-size: 3.5em;
            margin-bottom: 10px;
            color: #ffffff;
            font-weight: 600;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .logo-icon {
            width: 55px;
            height: 55px;
            background: linear-gradient(135deg, #7b68ee 0%, #9370db 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 25px rgba(123, 104, 238, 0.4);
            font-size: 28px;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.7;
            font-weight: 300;
            letter-spacing: 1px;
        }

        nav {
            text-align: center;
            margin-bottom: 40px;
        }

        nav a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            margin: 0 15px;
            font-size: 1.1em;
            transition: all 0.3s;
            padding: 8px 16px;
            border-radius: 8px;
        }

        nav a:hover {
            color: #ffffff;
            background: rgba(123, 104, 238, 0.2);
        }

        nav a.active {
            color: #7b68ee;
            font-weight: 600;
        }

        /* Mobile Navigation */
        .nav-toggle {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            padding: 10px;
            z-index: 1001;
        }

        .nav-toggle span {
            display: block;
            width: 28px;
            height: 3px;
            background: #fff;
            margin: 6px 0;
            border-radius: 3px;
            transition: all 0.3s ease;
        }

        .nav-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .nav-toggle.active span:nth-child(2) {
            opacity: 0;
        }

        .nav-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        /* Theme Toggle Button */
        .theme-toggle {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 44px;
            height: 44px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 1001;
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
            transform: scale(1.1);
        }

        .theme-toggle svg {
            width: 22px;
            height: 22px;
            fill: #fff;
            transition: transform 0.3s ease;
        }

        .theme-toggle:hover svg { transform: rotate(15deg); }
        .theme-toggle .sun-icon { display: none; }
        .theme-toggle .moon-icon { display: block; }

        .nav-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .nav-overlay.active {
            opacity: 1;
        }

        @media (max-width: 768px) {
            .nav-toggle {
                display: block;
                position: absolute;
                top: 20px;
                right: 20px;
            }

            nav {
                position: fixed;
                top: 0;
                right: -280px;
                width: 280px;
                height: 100vh;
                background: linear-gradient(180deg, #1a1f3a 0%, #0a0e27 100%);
                display: flex;
                flex-direction: column;
                justify-content: flex-start;
                padding: 80px 20px 40px;
                margin: 0;
                z-index: 1000;
                transition: right 0.3s ease;
                box-shadow: -5px 0 30px rgba(0, 0, 0, 0.5);
            }

            nav.active {
                right: 0;
            }

            nav a {
                display: block;
                margin: 8px 0;
                padding: 15px 20px;
                font-size: 1.1em;
                text-align: left;
                border-radius: 10px;
            }

            nav a:hover, nav a.active {
                background: rgba(123, 104, 238, 0.2);
            }

            .nav-overlay.active {
                display: block;
            }

            header {
                position: relative;
                margin-bottom: 15px;
            }

            header p {
                margin-bottom: 0;
            }
        }

        @media (max-width: 480px) {
            body { padding: 8px; }
            header h1 { font-size: 1.5em; flex-direction: row; gap: 6px; }
            header { margin-bottom: 8px; }
            .stopwatch-container { width: 160px; height: 160px; }
            .timer-container { padding: 12px 10px; gap: 12px; }
            .timer-selector { display: none; }
            .custom-timer-section { display: none; }
            .flip-card { width: 40px; height: 60px; }
            .flip-card-inner { font-size: 2.2em; }
            .colon { font-size: 2.2em; }
            .quick-btn { padding: 6px 10px; font-size: 0.8em; }
            .control-btn { padding: 10px 16px; font-size: 0.9em; }
        }

        @media (max-width: 360px) {
            body { padding: 5px; }
            header { margin-bottom: 5px; }
            header h1 { font-size: 1.3em; gap: 5px; }
            .logo-icon { width: 25px; height: 25px; }
            .stopwatch-container { width: 140px; height: 140px; }
            .timer-container { padding: 10px 8px; gap: 10px; }
            .flip-card { width: 35px; height: 52px; }
            .flip-card-inner { font-size: 1.8em; }
            .colon { font-size: 1.8em; }
            .quick-btn { padding: 5px 8px; font-size: 0.75em; }
            .control-btn { padding: 8px 14px; font-size: 0.85em; }
        }

        .ad-container {
            margin: 20px auto;
            text-align: center;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .timer-container {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            padding: 60px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.6);
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 60px;
        }

        .stopwatch-container {
            position: relative;
            width: 450px;
            height: 450px;
            flex-shrink: 0;
            filter: drop-shadow(0 20px 40px rgba(123, 104, 238, 0.3));
        }

        .stopwatch-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .hand {
            position: absolute;
            bottom: 43.53%;
            left: 50%;
            transform-origin: bottom center;
            border-radius: 50% 50% 0 0;
        }

        .minute-hand {
            width: 7px;
            height: 22%;
            margin-left: -3.5px;
            background: linear-gradient(180deg, #7b68ee 0%, #9370db 100%);
            z-index: 101;
            box-shadow: 0 0 15px rgba(123, 104, 238, 0.5);
        }

        .second-hand {
            width: 5px;
            height: 26%;
            margin-left: -2.5px;
            background: linear-gradient(180deg, #dda0dd 0%, #c285c2 100%);
            z-index: 102;
            box-shadow: 0 0 20px rgba(221, 160, 221, 0.6);
        }

        .controls-panel {
            flex: 1;
            min-width: 350px;
            display: flex;
            flex-direction: column;
            gap: 25px;
            align-items: center;
        }

        .timer-title {
            font-size: 2.5em;
            color: #7b68ee;
            text-align: center;
            margin-bottom: 10px;
        }

        .nap-presets {
            width: 100%;
        }

        .nap-presets h3 {
            color: #7b68ee;
            margin-bottom: 15px;
            text-align: center;
        }

        .preset-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .preset-btn {
            padding: 15px 20px;
            background: rgba(123, 104, 238, 0.2);
            border: 1px solid rgba(123, 104, 238, 0.3);
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
        }

        .preset-btn:hover {
            background: rgba(123, 104, 238, 0.4);
            transform: translateY(-2px);
        }

        .preset-btn.active {
            background: linear-gradient(135deg, #7b68ee 0%, #9370db 100%);
            border-color: transparent;
        }

        .digital-timer {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
        }

        .flip-card {
            position: relative;
            width: 100px;
            height: 140px;
            background: linear-gradient(to bottom, #f5f5f5 0%, #e0e0e0 50%, #d0d0d0 50%, #c0c0c0 100%);
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        .flip-card::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: #1a1a1a;
            z-index: 2;
        }

        .flip-card-inner {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5.5em;
            font-weight: 700;
            color: #1a1a1a;
            font-family: 'Courier New', monospace;
        }

        .colon {
            font-size: 5.5em;
            font-weight: 700;
            color: #ffffff;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 99% { opacity: 0.3; }
        }

        .flip-card.flipping .flip-card-inner {
            animation: flip 0.6s ease-in-out;
        }

        @keyframes flip {
            0% { transform: rotateX(0deg); }
            50% { transform: rotateX(-90deg); }
            100% { transform: rotateX(0deg); }
        }

        .sound-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(123, 104, 238, 0.1);
            padding: 15px 25px;
            border-radius: 12px;
            border: 1px solid rgba(123, 104, 238, 0.3);
        }

        .sound-selector label {
            color: #7b68ee;
            font-weight: 600;
        }

        .sound-selector select {
            padding: 10px 15px;
            border-radius: 8px;
            border: 1px solid rgba(123, 104, 238, 0.4);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1em;
            cursor: pointer;
        }

        .sound-selector select option {
            background: #2d1b4e;
            color: white;
        }

        .test-sound-btn, .stop-sound-btn {
            padding: 10px 15px;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .test-sound-btn {
            background: rgba(123, 104, 238, 0.3);
            border: 1px solid rgba(123, 104, 238, 0.5);
        }

        .test-sound-btn:hover {
            background: rgba(123, 104, 238, 0.5);
        }

        .stop-sound-btn {
            background: rgba(231, 76, 60, 0.3);
            border: 1px solid rgba(231, 76, 60, 0.5);
        }

        .stop-sound-btn:hover {
            background: rgba(231, 76, 60, 0.5);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 20px 50px;
            font-size: 1.2em;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            text-transform: uppercase;
        }

        .start-btn {
            background: linear-gradient(135deg, #7b68ee 0%, #9370db 100%);
            color: white;
            box-shadow: 0 10px 30px rgba(123, 104, 238, 0.4);
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(123, 104, 238, 0.5);
        }

        .pause-btn {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: white;
        }

        .reset-btn {
            background: linear-gradient(135deg, #dda0dd 0%, #c285c2 100%);
            color: white;
        }

        .seo-content {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            padding: 50px;
            margin-bottom: 40px;
        }

        .seo-content h2 {
            font-size: 2.2em;
            color: #ffffff;
            margin-bottom: 25px;
        }

        .seo-content h3 {
            font-size: 1.6em;
            color: #7b68ee;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        .seo-content p {
            font-size: 1.1em;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.85);
            margin-bottom: 20px;
        }

        .seo-content ul {
            margin: 20px 0 20px 30px;
        }

        .seo-content li {
            font-size: 1.05em;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.85);
            margin-bottom: 12px;
        }

        .faq-section {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            padding: 50px;
            margin-bottom: 40px;
        }

        .faq-item {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .faq-item:last-child {
            border-bottom: none;
        }

        .faq-question {
            font-size: 1.4em;
            color: #7b68ee;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .faq-answer {
            font-size: 1.1em;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.85);
        }

        .related-timers {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            text-align: center;
        }

        .related-timers h3 {
            color: #ffffff;
            margin-bottom: 20px;
        }

        .related-timers a {
            display: inline-block;
            color: #7b68ee;
            text-decoration: none;
            padding: 10px 20px;
            margin: 5px;
            border: 1px solid rgba(123, 104, 238, 0.3);
            border-radius: 8px;
            transition: all 0.3s;
        }

        .related-timers a:hover {
            background: rgba(123, 104, 238, 0.2);
        }

        footer {
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
            padding: 30px;
        }

        footer a {
            color: rgba(255, 255, 255, 0.5);
            text-decoration: none;
        }

        /* Fullscreen Button */
        .fullscreen-btn {
            padding: 12px 20px;
            background: rgba(123, 104, 238, 0.2);
            border: 1px solid rgba(123, 104, 238, 0.4);
            border-radius: 10px;
            color: #7b68ee;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .fullscreen-btn:hover {
            background: rgba(123, 104, 238, 0.4);
            transform: translateY(-2px);
        }

        /* Exit Fullscreen Button */
        .exit-fullscreen-btn {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 20px;
            background: rgba(123, 104, 238, 0.3);
            border: 1px solid rgba(123, 104, 238, 0.5);
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-size: 1em;
            z-index: 10001;
            transition: all 0.3s;
        }

        .exit-fullscreen-btn:hover {
            background: rgba(123, 104, 238, 0.5);
        }

        /* Fullscreen Mode */
        body.fullscreen-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #2d1b4e 50%, #1e1e3f 100%);
        }

        body.fullscreen-mode .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }

        body.fullscreen-mode header,
        body.fullscreen-mode nav,
        body.fullscreen-mode .nav-toggle,
        body.fullscreen-mode .nav-overlay,
        body.fullscreen-mode .ad-container,
        body.fullscreen-mode .seo-content,
        body.fullscreen-mode .faq-section,
        body.fullscreen-mode .related-timers,
        body.fullscreen-mode footer,
        body.fullscreen-mode .nap-presets,
        body.fullscreen-mode .sound-selector,
        body.fullscreen-mode .fullscreen-btn,
        body.fullscreen-mode .share-btn,
        body.fullscreen-mode .share-modal,
        body.fullscreen-mode .keyboard-hints {
            display: none !important;
        }

        body.fullscreen-mode .exit-fullscreen-btn {
            display: block;
        }

        body.fullscreen-mode .timer-container {
            background: transparent;
            border: none;
            box-shadow: none;
            margin: 0;
            padding: 20px;
            flex-direction: column;
            max-width: none;
        }

        body.fullscreen-mode .stopwatch-container {
            width: 500px;
            height: 500px;
        }

        body.fullscreen-mode .controls-panel {
            display: flex !important;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-width: auto;
            width: 100%;
            flex: none;
        }

        body.fullscreen-mode .digital-display {
            display: block !important;
            margin: 30px 0;
        }

        body.fullscreen-mode .digital-timer {
            margin: 30px 0;
        }

        body.fullscreen-mode .flip-card {
            width: 120px;
            height: 160px;
        }

        body.fullscreen-mode .flip-card-inner {
            font-size: 6em;
        }

        body.fullscreen-mode .colon {
            font-size: 6em;
        }

        @media (max-width: 768px) {
            body.fullscreen-mode .stopwatch-container {
                width: 280px;
                height: 280px;
            }

            body.fullscreen-mode .flip-card {
                width: 60px;
                height: 90px;
            }

            body.fullscreen-mode .flip-card-inner {
                font-size: 3em;
            }

            body.fullscreen-mode .colon {
                font-size: 3em;
            }
        }

        /* Share Button */
        .share-btn {
            padding: 12px 20px;
            background: rgba(123, 104, 238, 0.2);
            border: 1px solid rgba(123, 104, 238, 0.4);
            border-radius: 10px;
            color: #7b68ee;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .share-btn:hover {
            background: rgba(123, 104, 238, 0.4);
            transform: translateY(-2px);
        }

        /* Share Modal */
        .share-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .share-modal.active {
            display: flex;
        }

        .share-modal-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #2d1b4e 100%);
            border: 1px solid rgba(123, 104, 238, 0.3);
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .share-modal-content h3 {
            color: #7b68ee;
            margin-bottom: 20px;
            font-size: 1.5em;
        }

        .share-url-container {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }

        .share-url-container input {
            flex: 1;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(123, 104, 238, 0.4);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1em;
        }

        .copy-btn {
            padding: 15px 25px;
            background: linear-gradient(135deg, #7b68ee 0%, #9370db 100%);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(123, 104, 238, 0.4);
        }

        .share-social {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .social-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .social-btn:hover {
            transform: translateY(-2px);
        }

        .social-btn.twitter {
            background: #1DA1F2;
        }

        .social-btn.facebook {
            background: #4267B2;
        }

        .share-modal-close {
            padding: 12px 30px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .share-modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Keyboard Hints */
        .keyboard-hints {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .keyboard-hint {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9em;
        }

        .keyboard-hint kbd {
            background: rgba(123, 104, 238, 0.2);
            border: 1px solid rgba(123, 104, 238, 0.3);
            border-radius: 4px;
            padding: 4px 8px;
            font-family: monospace;
            color: #7b68ee;
        }

        @media (max-width: 768px) {
            .keyboard-hints {
                display: none;
            }
        }

        @media (max-width: 1024px) {
            .timer-container {
                flex-direction: column;
                padding: 40px;
            }

            .stopwatch-container {
                width: 350px;
                height: 350px;
            }
        }

        @media (max-width: 768px) {
            body { padding: 10px; }
            header h1 { font-size: 1.8em; gap: 8px; }
            .logo-icon { width: 35px; height: 35px; }
            header p { display: none; }
            .stopwatch-container { width: 200px; height: 200px; }
            .timer-container { padding: 15px; gap: 15px; }
            .controls-panel { gap: 12px; }
            .flip-card { width: 45px; height: 68px; }
            .flip-card-inner { font-size: 2.5em; }
            .colon { font-size: 2.5em; }
            .quick-start { gap: 8px; margin: 8px 0; }
            .quick-btn { padding: 8px 12px; font-size: 0.85em; }
            .control-btn { padding: 12px 20px; font-size: 0.95em; }
            .preset-grid {
                grid-template-columns: 1fr;
            }
            .sound-selector {
                flex-direction: column;
                gap: 10px;
            }
            .seo-content, .faq-section {
                padding: 30px 20px;
            }
        }

        /* Light Mode Styles */
        body.light-mode {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 50%, #f0f2f5 100%);
            color: #333;
        }

        body.light-mode .theme-toggle {
            background: rgba(0, 0, 0, 0.05);
            border-color: rgba(0, 0, 0, 0.1);
        }

        body.light-mode .theme-toggle:hover {
            background: rgba(0, 0, 0, 0.1);
            border-color: rgba(0, 0, 0, 0.2);
        }

        body.light-mode .theme-toggle svg {
            fill: #333;
        }

        body.light-mode .theme-toggle .sun-icon { display: block; }
        body.light-mode .theme-toggle .moon-icon { display: none; }

        body.light-mode header h1 {
            color: #333;
        }

        body.light-mode header p {
            color: #666;
        }

        body.light-mode nav a {
            color: rgba(0, 0, 0, 0.6);
        }

        body.light-mode nav a:hover {
            color: #333;
            background: rgba(123, 104, 238, 0.1);
        }

        body.light-mode nav a.active {
            color: #7b68ee;
        }

        body.light-mode .timer-container {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(0, 0, 0, 0.1);
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.1);
        }

        body.light-mode .nap-presets h3 {
            color: #7b68ee;
        }

        body.light-mode .preset-btn {
            background: rgba(123, 104, 238, 0.1);
            border-color: rgba(123, 104, 238, 0.2);
            color: #333;
        }

        body.light-mode .preset-btn:hover {
            background: rgba(123, 104, 238, 0.2);
        }

        body.light-mode .preset-btn.active {
            background: linear-gradient(135deg, #7b68ee 0%, #9370db 100%);
            color: white;
        }

        body.light-mode .colon {
            color: #333;
        }

        body.light-mode .sound-selector {
            background: rgba(123, 104, 238, 0.05);
            border-color: rgba(123, 104, 238, 0.2);
        }

        body.light-mode .sound-selector select {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(123, 104, 238, 0.3);
            color: #333;
        }

        body.light-mode .sound-selector select option {
            background: #fff;
            color: #333;
        }

        body.light-mode .fullscreen-btn,
        body.light-mode .share-btn {
            background: rgba(123, 104, 238, 0.1);
            border-color: rgba(123, 104, 238, 0.3);
        }

        body.light-mode .fullscreen-btn:hover,
        body.light-mode .share-btn:hover {
            background: rgba(123, 104, 238, 0.2);
        }

        body.light-mode .keyboard-hint {
            color: rgba(0, 0, 0, 0.5);
        }

        body.light-mode .keyboard-hint kbd {
            background: rgba(123, 104, 238, 0.1);
            border-color: rgba(123, 104, 238, 0.2);
        }

        body.light-mode .seo-content,
        body.light-mode .faq-section {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(0, 0, 0, 0.1);
        }

        body.light-mode .seo-content h2 {
            color: #333;
        }

        body.light-mode .seo-content p,
        body.light-mode .seo-content li,
        body.light-mode .faq-answer {
            color: #555;
        }

        body.light-mode .related-timers {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(0, 0, 0, 0.1);
        }

        body.light-mode .related-timers h3 {
            color: #333;
        }

        body.light-mode .share-modal-content {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            border-color: rgba(123, 104, 238, 0.2);
        }

        body.light-mode .share-url-container input {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(123, 104, 238, 0.3);
            color: #333;
        }

        body.light-mode .share-modal-close {
            background: rgba(0, 0, 0, 0.05);
            border-color: rgba(0, 0, 0, 0.1);
            color: #333;
        }

        body.light-mode .share-modal-close:hover {
            background: rgba(0, 0, 0, 0.1);
        }

        body.light-mode footer {
            color: rgba(0, 0, 0, 0.5);
        }

        body.light-mode footer a {
            color: rgba(0, 0, 0, 0.5);
        }

        body.light-mode .nav-toggle span {
            background: #333;
        }

        @media (max-width: 768px) {
            body.light-mode nav {
                background: linear-gradient(180deg, #f5f7fa 0%, #e4e8f0 100%);
            }

            body.light-mode nav a:hover,
            body.light-mode nav a.active {
                background: rgba(123, 104, 238, 0.1);
            }
        }
    </style>
</head>

<body>
    <button class="exit-fullscreen-btn" id="exitFullscreenBtn">Exit Fullscreen</button>
    <div class="container">
        <!-- Screen Reader Announcements -->
        <div id="srAnnouncements" class="sr-only" aria-live="assertive" aria-atomic="true"></div>

        <header>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle light/dark mode">
                <svg class="moon-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                </svg>
                <svg class="sun-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="5"/>
                    <line x1="12" y1="1" x2="12" y2="3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="12" y1="21" x2="12" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="1" y1="12" x2="3" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="21" y1="12" x2="23" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            <h1>
                <div class="logo-icon">&#127769;</div>
                Sleep Timer
            </h1>
            <p>Free Online Nap Timer with Gentle Alarm</p>
            <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </header>

        <div class="nav-overlay" id="navOverlay"></div>
        <nav id="mainNav">
            <a href="/">Home</a>
            <a href="/pomodoro-timer">Pomodoro</a>
            <a href="/study-timer">Study</a>
            <a href="/workout-timer">Workout</a>
            <a href="/meditation-timer">Meditation</a>
            <a href="/cooking-timer">Cooking</a>
            <a href="/countdown-timer">Countdown</a>
            <a href="/stopwatch">Stopwatch</a>
        </nav>

        <div class="ad-container top-ad">
            <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5523870768931777"
                data-ad-slot="7285922677" data-ad-format="horizontal" data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <div class="timer-container">
            <div class="stopwatch-container">
                <img src="stopwatch.png" alt="Sleep timer - free online nap timer for power naps and rest" class="stopwatch-image">
                <div class="minute-hand hand" id="minuteHand"></div>
                <div class="second-hand hand" id="secondHand"></div>
            </div>

            <div class="controls-panel">
                <div class="nap-presets">
                    <h3>Nap Presets</h3>
                    <div class="preset-grid">
                        <button class="preset-btn active" data-time="1200">Power Nap (20 min)</button>
                        <button class="preset-btn" data-time="1800">Short Nap (30 min)</button>
                        <button class="preset-btn" data-time="2700">Refresher (45 min)</button>
                        <button class="preset-btn" data-time="5400">Full Cycle (90 min)</button>
                    </div>
                </div>

                <div class="digital-timer">
                    <div class="flip-card" id="minuteTens">
                        <div class="flip-card-inner">2</div>
                    </div>
                    <div class="flip-card" id="minuteOnes">
                        <div class="flip-card-inner">0</div>
                    </div>
                    <div class="colon">:</div>
                    <div class="flip-card" id="secondTens">
                        <div class="flip-card-inner">0</div>
                    </div>
                    <div class="flip-card" id="secondOnes">
                        <div class="flip-card-inner">0</div>
                    </div>
                </div>

                <div class="sound-selector">
                    <label for="alarmSound">Wake-Up Sound:</label>
                    <select id="alarmSound">
                        <option value="/static/digital-clock-beep.wav">Digital Beep (Default)</option>
                        <option value="/static/vintage-warning-alarm.wav">Vintage Alarm</option>
                        <option value="/static/facility-breach-alarm.wav">Facility Alarm</option>
                    </select>
                    <button class="test-sound-btn" id="testSound">Test</button>
                    <button class="stop-sound-btn" id="stopSound">Stop</button>
                </div>

                <button class="fullscreen-btn" id="fullscreenBtn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/>
                    </svg>
                    Fullscreen Mode
                </button>

                <button class="share-btn" id="shareBtn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="18" cy="5" r="3"></circle>
                        <circle cx="6" cy="12" r="3"></circle>
                        <circle cx="18" cy="19" r="3"></circle>
                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                    </svg>
                    Share Timer
                </button>

                <div class="controls">
                    <button class="control-btn start-btn" id="startBtn">Start Nap</button>
                    <button class="control-btn pause-btn" id="pauseBtn">Pause</button>
                    <button class="control-btn reset-btn" id="resetBtn">Reset</button>
                </div>

                <div class="keyboard-hints">
                    <span class="keyboard-hint"><kbd>Space</kbd> Start/Pause</span>
                    <span class="keyboard-hint"><kbd>R</kbd> Reset</span>
                    <span class="keyboard-hint"><kbd>F</kbd> Fullscreen</span>
                </div>
            </div>
        </div>

        <article class="seo-content">
            <h2>Free Sleep Timer for Naps</h2>
            <p>
                Need a reliable sleep timer for your power nap? Our free nap timer helps you get the perfect amount of rest without oversleeping. Choose from scientifically-backed nap durations and wake up refreshed with our gentle alarm.
            </p>

            <h3>Best Nap Durations</h3>
            <ul>
                <li><strong>20 Minute Power Nap</strong> - The ideal quick rest. Boosts alertness and performance without entering deep sleep. Perfect for work breaks.</li>
                <li><strong>30 Minute Nap</strong> - Slightly longer rest that can improve memory and creativity. May cause brief grogginess upon waking.</li>
                <li><strong>45 Minute Refresher</strong> - Includes some slow-wave sleep. Good for physical recovery but may need a few minutes to fully wake.</li>
                <li><strong>90 Minute Full Cycle</strong> - One complete sleep cycle including REM. Wake feeling fully restored with enhanced learning and memory.</li>
            </ul>

            <h3>The Science of Power Napping</h3>
            <p>
                Research shows that a 20-minute nap can significantly improve alertness, mood, and cognitive performance. NASA studies found that pilots who took 26-minute naps showed 34% improvement in performance and 54% improvement in alertness. Our sleep timer helps you get exactly the right amount of rest.
            </p>

            <h3>When to Nap</h3>
            <p>
                The best time for a nap is during the afternoon energy dip, typically between 1-3 PM. This timing aligns with your body's natural circadian rhythm and won't interfere with nighttime sleep. Avoid napping after 4 PM, as it may make it harder to fall asleep at night.
            </p>

            <h3>Tips for Better Power Naps</h3>
            <ul>
                <li><strong>Find a quiet, dark space</strong> - Even partial darkness helps</li>
                <li><strong>Set the timer first</strong> - Remove the anxiety of oversleeping</li>
                <li><strong>Use the 20-minute rule</strong> - Short enough to avoid grogginess</li>
                <li><strong>Consider a "coffee nap"</strong> - Drink coffee then nap 20 min; wake as caffeine kicks in</li>
                <li><strong>Keep it consistent</strong> - Regular naps are more effective</li>
            </ul>
        </article>

        <section class="faq-section">
            <h2 style="text-align: center; margin-bottom: 40px; font-size: 2.2em;">Sleep Timer FAQ</h2>

            <div class="faq-item">
                <div class="faq-question">How long should a power nap be?</div>
                <div class="faq-answer">
                    The ideal power nap is 20-30 minutes. This length provides restoration and improved alertness without entering deep sleep, which can cause grogginess. Our sleep timer has presets for both 20 and 30 minute naps.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">What is a 90 minute sleep cycle?</div>
                <div class="faq-answer">
                    A complete sleep cycle takes approximately 90 minutes and includes all stages of sleep: light sleep, deep sleep, and REM. Waking at the end of a cycle helps you feel refreshed. Use our 90 minute preset for a full restorative nap.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Is napping good for you?</div>
                <div class="faq-answer">
                    Yes! Research shows that napping can improve alertness, enhance performance, reduce stress, and boost mood. A 20-minute power nap can be more effective than caffeine for improving cognitive function.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">When is the best time to nap?</div>
                <div class="faq-answer">
                    The optimal nap time is early-to-mid afternoon, between 1-3 PM. This aligns with your body's natural energy dip and won't interfere with nighttime sleep. Avoid napping after 4 PM.
                </div>
            </div>

            <div class="faq-item">
                <div class="faq-question">Why do I feel worse after napping?</div>
                <div class="faq-answer">
                    If you feel groggy after napping, you may be waking from deep sleep. Keep naps to 20-30 minutes, or extend to a full 90-minute cycle. This "sleep inertia" typically passes within 15 minutes.
                </div>
            </div>
        </section>

        <div class="related-timers">
            <h3>Other Popular Timers</h3>
            <a href="/meditation-timer">Meditation Timer</a>
            <a href="/1-hour-timer">1 Hour Timer</a>
            <a href="/30-minute-timer">30 Minute Timer</a>
            <a href="/15-minute-timer">15 Minute Timer</a>
            <a href="/">All Timers</a>
        </div>

        <!-- Share Modal -->
        <div class="share-modal" id="shareModal">
            <div class="share-modal-content">
                <h3>Share This Timer</h3>
                <div class="share-url-container">
                    <input type="text" id="shareUrl" readonly>
                    <button class="copy-btn" id="copyBtn">Copy</button>
                </div>
                <div class="share-social">
                    <button class="social-btn twitter" id="shareTwitter">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                        Twitter
                    </button>
                    <button class="social-btn facebook" id="shareFacebook">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                        </svg>
                        Facebook
                    </button>
                </div>
                <button class="share-modal-close" id="shareModalClose">Close</button>
            </div>
        </div>

        <div class="ad-container bottom-ad">
            <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5523870768931777"
                data-ad-slot="6571606806" data-ad-format="horizontal" data-full-width-responsive="true"></ins>
            <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <footer>
            <p>&copy; 2025 LazyTimer.com | <a href="/">All Timers</a> | <a href="/about">About</a> | <a href="/privacy-policy">Privacy</a></p>
        </footer>
    </div>

    <script>
        let timeLeft = 1200; // 20 minutes default (power nap)
        let totalTime = 1200;
        let isRunning = false;
        let timerInterval;
        let alarmAudio = null;
        const originalTitle = document.title;
        const STORAGE_KEY = 'lazyTimer_sleep';
        const srAnnouncements = document.getElementById('srAnnouncements');

        // Screen reader announcement helper
        function announce(message) {
            srAnnouncements.textContent = '';
            setTimeout(() => {
                srAnnouncements.textContent = message;
            }, 50);
        }

        const minuteTensCard = document.getElementById('minuteTens');
        const minuteOnesCard = document.getElementById('minuteOnes');
        const secondTensCard = document.getElementById('secondTens');
        const secondOnesCard = document.getElementById('secondOnes');
        const minuteHand = document.getElementById('minuteHand');
        const secondHand = document.getElementById('secondHand');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resetBtn = document.getElementById('resetBtn');
        const alarmSelect = document.getElementById('alarmSound');
        const testSoundBtn = document.getElementById('testSound');
        const buttons = document.querySelectorAll('.preset-btn');

        // Load saved sound preference
        const savedSound = localStorage.getItem('alarmSound');
        if (savedSound) {
            alarmSelect.value = savedSound;
        }

        // Save sound preference when changed
        alarmSelect.addEventListener('change', function() {
            localStorage.setItem('alarmSound', this.value);
        });

        // Test sound button
        testSoundBtn.addEventListener('click', function() {
            playAlarm(true);
        });

        // Stop sound button
        const stopSoundBtn = document.getElementById('stopSound');
        stopSoundBtn.addEventListener('click', function() {
            if (alarmAudio) {
                alarmAudio.pause();
                alarmAudio.currentTime = 0;
            }
        });

        function playAlarm(isTest = false) {
            if (alarmAudio) {
                alarmAudio.pause();
                alarmAudio.currentTime = 0;
            }
            alarmAudio = new Audio(alarmSelect.value);
            alarmAudio.play().catch(e => console.log('Audio play failed:', e));
            setTimeout(() => {
                if (alarmAudio) {
                    alarmAudio.pause();
                    alarmAudio.currentTime = 0;
                }
            }, isTest ? 2000 : 5000);
        }

        buttons.forEach(btn => {
            btn.addEventListener('click', function() {
                buttons.forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                const time = parseInt(this.getAttribute('data-time'));
                pauseTimer();
                timeLeft = time;
                totalTime = time;
                updateDisplay();
            });
        });

        function updateFlipCard(card, newValue) {
            const inner = card.querySelector('.flip-card-inner');
            if (inner.textContent !== newValue.toString()) {
                card.classList.add('flipping');
                setTimeout(() => {
                    inner.textContent = newValue;
                    card.classList.remove('flipping');
                }, 300);
            }
        }

        function updateTabTitle() {
            if (timeLeft <= 0) {
                document.title = "Wake Up! - Sleep Timer";
            } else {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.title = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')} - Sleep Timer`;
            }
        }

        function saveTimerState() {
            const state = {
                timeLeft: timeLeft,
                totalTime: totalTime,
                isRunning: isRunning,
                timestamp: Date.now()
            };
            localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
        }

        function restoreTimerState() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                try {
                    const state = JSON.parse(saved);
                    const elapsed = Math.floor((Date.now() - state.timestamp) / 1000);
                    // Only restore if within 60 minutes
                    if (elapsed < 3600) {
                        if (state.isRunning) {
                            timeLeft = Math.max(0, state.timeLeft - elapsed);
                            totalTime = state.totalTime;
                            if (timeLeft > 0) {
                                updateDisplay();
                                startTimer();
                            }
                        } else {
                            timeLeft = state.timeLeft;
                            totalTime = state.totalTime;
                            updateDisplay();
                        }
                    }
                } catch (e) {
                    console.log('Failed to restore timer state');
                }
            }
        }

        function updateDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;

            updateFlipCard(minuteTensCard, Math.floor(minutes / 10));
            updateFlipCard(minuteOnesCard, minutes % 10);
            updateFlipCard(secondTensCard, Math.floor(seconds / 10));
            updateFlipCard(secondOnesCard, seconds % 10);

            const elapsedTime = totalTime - timeLeft;
            const minuteAngle = (elapsedTime / totalTime) * 360;
            const secondAngle = ((60 - seconds) / 60) * 360;

            minuteHand.style.transform = `rotate(${minuteAngle}deg)`;
            secondHand.style.transform = `rotate(${secondAngle}deg)`;

            // Update tab title
            updateTabTitle();
        }

        function startTimer() {
            if (timeLeft > 0 && !isRunning) {
                isRunning = true;
                startBtn.textContent = 'Napping...';
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                announce(`Timer started: ${minutes} minutes ${seconds} seconds remaining`);
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateDisplay();
                    saveTimerState();
                    if (timeLeft <= 0) {
                        pauseTimer();
                        playAlarm();
                        localStorage.removeItem(STORAGE_KEY);
                        announce('Timer complete!');
                    }
                }, 1000);
                saveTimerState();
            }
        }

        function pauseTimer() {
            const wasRunning = isRunning;
            isRunning = false;
            startBtn.textContent = 'Start Nap';
            clearInterval(timerInterval);
            document.title = originalTitle;
            saveTimerState();
            if (wasRunning && timeLeft > 0) {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                announce(`Timer paused: ${minutes} minutes ${seconds} seconds remaining`);
            }
        }

        function resetTimer() {
            pauseTimer();
            const activeBtn = document.querySelector('.preset-btn.active');
            if (activeBtn) {
                timeLeft = parseInt(activeBtn.getAttribute('data-time'));
                totalTime = timeLeft;
            } else {
                timeLeft = 1200;
                totalTime = 1200;
            }
            updateDisplay();
            document.title = originalTitle;
            localStorage.removeItem(STORAGE_KEY);
            const minutes = Math.floor(totalTime / 60);
            const seconds = totalTime % 60;
            announce(`Timer reset to ${minutes} minutes ${seconds} seconds`);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ignore if user is typing in an input field
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT') return;

            if (e.code === 'Space') {
                e.preventDefault();
                if (isRunning) {
                    pauseTimer();
                } else {
                    startTimer();
                }
            } else if (e.code === 'KeyR') {
                e.preventDefault();
                resetTimer();
            } else if (e.code === 'KeyF') {
                e.preventDefault();
                toggleFullscreen();
            } else if (e.code === 'Escape') {
                if (document.body.classList.contains('fullscreen-mode')) {
                    e.preventDefault();
                    toggleFullscreen();
                }
            }
        });

        startBtn.addEventListener('click', startTimer);
        pauseBtn.addEventListener('click', pauseTimer);
        resetBtn.addEventListener('click', resetTimer);

        updateDisplay();
        restoreTimerState();

        // Mobile Navigation Toggle
        const navToggle = document.getElementById('navToggle');
        const mainNav = document.getElementById('mainNav');
        const navOverlay = document.getElementById('navOverlay');

        function toggleNav() {
            navToggle.classList.toggle('active');
            mainNav.classList.toggle('active');
            navOverlay.classList.toggle('active');
            document.body.style.overflow = mainNav.classList.contains('active') ? 'hidden' : '';
        }

        navToggle.addEventListener('click', toggleNav);
        navOverlay.addEventListener('click', toggleNav);

        // Close nav when clicking a link
        mainNav.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth <= 768) {
                    toggleNav();
                }
            });
        });

        // Fullscreen Mode
        const fullscreenBtn = document.getElementById('fullscreenBtn');
        const exitFullscreenBtn = document.getElementById('exitFullscreenBtn');

        function toggleFullscreen() {
            document.body.classList.toggle('fullscreen-mode');
            if (document.body.classList.contains('fullscreen-mode')) {
                announce('Fullscreen mode enabled. Press Escape or F to exit.');
            } else {
                announce('Fullscreen mode disabled.');
            }
        }

        fullscreenBtn.addEventListener('click', toggleFullscreen);
        exitFullscreenBtn.addEventListener('click', toggleFullscreen);

        // URL Sharing Functions
        const shareBtn = document.getElementById('shareBtn');
        const shareModal = document.getElementById('shareModal');
        const shareUrlInput = document.getElementById('shareUrl');
        const copyBtn = document.getElementById('copyBtn');
        const shareTwitterBtn = document.getElementById('shareTwitter');
        const shareFacebookBtn = document.getElementById('shareFacebook');
        const shareModalClose = document.getElementById('shareModalClose');

        function formatTimeForShare(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            if (secs === 0) {
                return mins + ' minute' + (mins !== 1 ? 's' : '');
            }
            return mins + ':' + String(secs).padStart(2, '0');
        }

        function generateShareUrl() {
            const baseUrl = window.location.origin + window.location.pathname;
            return baseUrl + '?t=' + totalTime;
        }

        function openShareModal() {
            const url = generateShareUrl();
            shareUrlInput.value = url;
            shareModal.classList.add('active');
        }

        function closeShareModal() {
            shareModal.classList.remove('active');
        }

        function copyShareUrl() {
            shareUrlInput.select();
            shareUrlInput.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(shareUrlInput.value).then(() => {
                const originalText = copyBtn.textContent;
                copyBtn.textContent = 'Copied!';
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                }, 2000);
            }).catch(() => {
                document.execCommand('copy');
                copyBtn.textContent = 'Copied!';
                setTimeout(() => {
                    copyBtn.textContent = 'Copy';
                }, 2000);
            });
        }

        function shareOnTwitter() {
            const url = generateShareUrl();
            const timeText = formatTimeForShare(totalTime);
            const text = 'Check out this ' + timeText + ' sleep timer!';
            const twitterUrl = 'https://twitter.com/intent/tweet?url=' + encodeURIComponent(url) + '&text=' + encodeURIComponent(text);
            window.open(twitterUrl, '_blank', 'width=550,height=420');
        }

        function shareOnFacebook() {
            const url = generateShareUrl();
            const facebookUrl = 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(url);
            window.open(facebookUrl, '_blank', 'width=550,height=420');
        }

        function loadTimerFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const timeParam = urlParams.get('t');
            if (timeParam) {
                const seconds = parseInt(timeParam);
                if (!isNaN(seconds) && seconds > 0 && seconds <= 7200) {
                    timeLeft = seconds;
                    totalTime = seconds;
                    // Clear active state from preset buttons
                    buttons.forEach(b => b.classList.remove('active'));
                    // Check if matches a preset
                    buttons.forEach(btn => {
                        if (parseInt(btn.getAttribute('data-time')) === seconds) {
                            btn.classList.add('active');
                        }
                    });
                    updateDisplay();
                }
            }
        }

        shareBtn.addEventListener('click', openShareModal);
        shareModalClose.addEventListener('click', closeShareModal);
        copyBtn.addEventListener('click', copyShareUrl);
        shareTwitterBtn.addEventListener('click', shareOnTwitter);
        shareFacebookBtn.addEventListener('click', shareOnFacebook);

        // Close modal when clicking outside
        shareModal.addEventListener('click', function(e) {
            if (e.target === shareModal) {
                closeShareModal();
            }
        });

        // Load timer from URL on page load
        loadTimerFromUrl();

        // Theme Toggle Functionality
        const themeToggle = document.getElementById('themeToggle');
        const themeColorMeta = document.querySelector('meta[name="theme-color"]');

        function initTheme() {
            const savedTheme = localStorage.getItem('lazyTimerTheme');
            if (savedTheme) {
                if (savedTheme === 'light') {
                    document.body.classList.add('light-mode');
                    if (themeColorMeta) themeColorMeta.setAttribute('content', '#f5f7fa');
                }
            } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
                document.body.classList.add('light-mode');
                if (themeColorMeta) themeColorMeta.setAttribute('content', '#f5f7fa');
            }
        }

        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            const isLight = document.body.classList.contains('light-mode');
            localStorage.setItem('lazyTimerTheme', isLight ? 'light' : 'dark');
            if (themeColorMeta) {
                themeColorMeta.setAttribute('content', isLight ? '#f5f7fa' : '#667eea');
            }
        }

        if (themeToggle) {
            themeToggle.addEventListener('click', toggleTheme);
        }

        if (window.matchMedia) {
            window.matchMedia('(prefers-color-scheme: light)').addEventListener('change', (e) => {
                if (!localStorage.getItem('lazyTimerTheme')) {
                    if (e.matches) {
                        document.body.classList.add('light-mode');
                        if (themeColorMeta) themeColorMeta.setAttribute('content', '#f5f7fa');
                    } else {
                        document.body.classList.remove('light-mode');
                        if (themeColorMeta) themeColorMeta.setAttribute('content', '#667eea');
                    }
                }
            });
        }

        initTheme();

        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('LazyTimer: Service Worker registered', registration.scope);
                    })
                    .catch((error) => {
                        console.log('LazyTimer: Service Worker registration failed', error);
                    });
            });
        }
    </script>
</body>

</html>
